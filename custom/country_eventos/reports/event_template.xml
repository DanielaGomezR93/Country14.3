<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<!-- script -->
	<template id="country_eventos.event_script" inherit_id="website.assets_frontend" name="Country Events Snippet Script">
		<xpath expr="/t" position="inside">
			<script type="text/javascript" src="/website_event/static/src/js/website_geolocation.js"></script>
			<script type="text/javascript" src="/country_eventos/static/src/js/event.js"></script>
		</xpath>
	</template>

	<!-- Binaural Eventos -->

	<template id="website_event.index" name="Events">
		    <t t-call="website.layout">
		      <div id="wrap">
		        <div class="oe_structure" id="oe_structure_website_event_index_1"/>
		        <div class="container">
		            <div class="row mt8">
		                <div class="col-md-12">
		                    <ol class="breadcrumb mb0">
		                        <li class="breadcrumb-item">
		                            <a href="/event">Our Events</a>
		                        </li>
		                        <li t-if="current_date" class="breadcrumb-item"><t t-esc="current_date"/></li>
		                        <li t-if="current_type" class="breadcrumb-item"><t t-esc="current_type.name"/></li>
		                        <li t-if="current_country" class="breadcrumb-item"><t t-esc="current_country.name"/></li>
		                    </ol>
		                </div>
		            </div>
		            <div class="row">
		                <div class="col-md-6 offset-3">
		                    <t t-call="website.pager"/>
		                </div>
		            </div>
		            <div class="row mt32 mb32">
		                <div class="col-lg-9" id="middle_column">
		                    <div class="text-center text-muted" t-if="not event_ids">
		                        <h1>No event found</h1>
		                        <p groups="event.group_event_manager">Use the top menu <i>'Content'</i> to create your first event.</p>
		                    </div>
		                    <ul class="list-unstyled">
		                        <li t-foreach="event_ids" t-as="event" t-attf-class="media#{' mt-3' if event_index else ''}">
		                            <div itemscope="itemscope" itemtype="http://schema.org/Event" class="media-body">
		                                <h4>
		                                    <a itemprop="url" t-att-class="event.state == 'done' and 'text-success'" t-attf-href="/event/#{ slug(event) }/#{(not event.menu_id) and 'register' or ''}"><span itemprop="name" t-field="event.name"> </span></a>
		                                    <small t-if="event.is_participating" class="badge badge-info">Participating</small>
		                                    <small t-if="event.is_online" class="badge badge-info">Online</small>
		                                    <small t-if="not event.website_published" class="badge badge-danger">unpublished</small>
		                                </h4>
		                                <div>
		                                    <t t-if="event.organizer_id">
		                                        Organized by: <span t-field="event.organizer_id"> </span>
		                                    </t>
		                                </div>
			                            <t t-if="event.event_type != 'invitations'">
				                            <div>
			                                    <i class="fa fa-clock-o" role="img" aria-label="Start date" title="Start date"></i> <span itemprop="startDate" t-field="event.with_context(tz=event.date_tz).date_begin" t-options='{"hide_seconds":"True"}'> </span> <i>to</i> <span itemprop="endDate" t-field="event.with_context(tz=event.date_tz).date_end" t-options='{"hide_seconds":"True"}'> </span>
			                                </div>
			                            </t>
		                                <t t-if="not event.is_online">
		                                    <div itemprop="location" t-field="event.address_id" t-options='{
		                                        "widget": "contact",
		                                        "fields": ["city"]
		                                        }'/>
		                                </t>
		                                <div class="text-muted" t-if="event.event_type_id">
		                                    <i class="fa fa-tag" role="img" aria-label="Event type" title="Event type"></i> <span t-field="event.event_type_id"/>
		                                </div>
		                            </div>
		                        </li>
		                    </ul>
		                </div>
		                <div class="col-lg-3 oe_structure" id="right_column">
		                </div>
		            </div>
		            <div class="row">
		                <div class="col-md-6 offset-3">
		                    <t t-call="website.pager"/>
		                </div>
		            </div>
		        </div>
		        <div class="oe_structure" id="oe_structure_website_event_index_2"/>
		      </div>
		    </t>
		</template>

	<template id="website_event.registration_template">
		    <t t-set="tickets_available" t-value="event.seats_available or event.seats_availability == 'unlimited'"/>
		    <t t-set="buy" t-value="tickets_available and event.state == 'confirm'"/>
		    <div itemscope="itemscope" itemprop="offers" itemtype="http://schema.org/AggregateOffer">
		        <form id="registration_form" t-attf-action="/event/#{slug(event)}/registration/new" method="post" class="card" t-if="buy">
		            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
		            <div class="card-header d-none d-lg-block">
		                <div class="row">
			                <t t-if="event.event_type != 'invitations'">
			                    <div class="col-lg-3">
			                        <h5><b>Ticket Type</b></h5>
			                    </div>
			                    <div class="col-lg-3">
			                        <h5><b>End of Registration</b></h5>
			                    </div>
			                    <div class="col-lg-3">
			                        <h5><b>Price</b></h5>
			                    </div>
			                    <div class="col-lg-3">
			                        <h5><b>Quantity</b></h5>
			                    </div>
			                </t>
			                <t t-else="">
				                <div class="col-lg-3">
			                        <h5><b>Tipo de Ticket</b></h5>
			                    </div>
				                <div class="col-lg-3">
			                        <h5><b></b></h5>
			                    </div>
			                    <div class="col-lg-3">
			                        <h5><b>Price</b></h5>
			                    </div>
			                    <div class="col-lg-3">
			                        <h5><b>Quantity</b></h5>
			                    </div>
			                </t>
		                </div>
		            </div>
		            <t t-id="tickets" t-call="website_event.ticket">
			            <t t-if="event.event_type != 'invitations'">
			                <t t-set="name">
			                    <span itemprop="name">Event Registration</span>
			                </t>
			                <t t-set="registration_end">
			                    <t t-if="event.date_begin">
			                        <span t-esc="event.date_begin_located"/>
			                    </t>
			                    <t t-if="not event.date_begin">
			                        <span>Unlimited</span>
			                    </t>
			                </t>
			                <t t-set="price">
			                    <span itemprop="price" content="0">
			                        Free
			                    </span>
			                </t>
			                <t t-set="quantity">
			                    <select name="nb_register-0" class="form-control">
			                        <t t-foreach="range(0, (event.seats_availability == 'unlimited' or event.seats_available &gt; 9) and 10 or event.seats_available+1)" t-as="nb">
			                            <option t-esc="nb" t-att-selected="nb == 1 and 'selected'"/>
			                        </t>
			                    </select>
			                </t>
			            </t>
			            <t t-else="">
				            <t t-set="name">
			                    <span itemprop="name">Event Registration</span>
			                </t>
				            <t t-set="registration_end">
			                    <span/>
			                </t>
			                <t t-set="price">
			                    <span itemprop="price" content="0">
			                        Free
			                    </span>
			                </t>
			                <t t-set="quantity">
			                    <select name="nb_register-0" class="form-control">
			                        <t t-foreach="range(0, (event.seats_availability == 'unlimited' or event.seats_available &gt; 9) and 10 or event.seats_available+1)" t-as="nb">
			                            <option t-esc="nb" t-att-selected="nb == 1 and 'selected'"/>
			                        </t>
			                    </select>
			                </t>
			            </t>
		            </t>
		            <div class="card-footer">
		                <div class="row">
			                <div style="margin-left: 0px" class="col-lg-8 offset-lg-4 col-xl-9 offset-xl-3">
			                    <t t-if="not valid">
						            <div class="alert alert-danger">
						                <strong>Alerta!</strong>
						                <t t-esc="msg"/>
						            </div>
						        </t>
		                    </div>
		                    <div style="margin-left: 0px" class="col-lg-4 offset-lg-8 col-xl-3 offset-xl-9">
		                        <button type="submit" class="btn btn-primary btn-lg btn-block a-submit" t-attf-id="#{event.id}">
		                            Register Now
		                        </button>
		                    </div>
		                </div>
		            </div>
		        </form>
		        <div t-if="not buy" class="alert alert-info" role="status">
		            <t t-if="event.state == 'draft'" itemprop="availability" content="http://schema.org/OutOfStock">
		                Event registration not yet started.
		            </t>
		            <t t-if="event.state != 'draft'" itemprop="availability" content="http://schema.org/Discontinued">
		                Event registration is closed.
		            </t>
		            <t t-if="request.env.user.has_group('event.group_event_manager')">
		                <a t-attf-href="/web#id=#{event.id}&amp;view_type=form&amp;model=event.event">
		                    <em><i class="fa fa-plus-circle" role="img" aria-label="Create" title="Create"></i>
		                    Configure and Launch Event Registration</em>
		                </a>
		            </t>
		        </div>
		    </div>
		</template>

	<template id="website_event.registration_attendee_details" name="Registration Attendee Details">
		    <div role="dialog" id="modal_attendees_registration" class="modal fade" tabindex="-1">
		        <div class="modal-dialog modal-lg">
		            <form id="attendee_registration" t-attf-action="/event/#{slug(event)}/registration/confirm" method="post" class="js_website_submit_form">
		                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
		                <div class="modal-content">
		                    <header class="modal-header">
		                        <h4 class="modal-title" id="myModalLabel"><strong>Attendees</strong></h4>
		                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">x</button>
		                    </header>
		                    <main class="modal-body">
		                        <div class="container">
		                            <t t-set="counter_type" t-value="1"/>
		                            <t t-set="counter" t-value="0"/>
		                            <t t-set="counter_frequent" t-value="0"/>
		                            <t t-foreach="tickets" t-as="ticket">
		                                <h4 class="o_page_header mt16">
		                                    <strong>
		                                        Ticket Type #<t t-raw="counter_type"/>: <t t-esc="ticket['name']"/>
		                                        <t t-if="ticket['price'] == 0">(Free)</t>
		                                    </strong>
										</h4>
										<div class="row">
											<div class="col-lg-3 d-inline-flex d-lg-inline-block align-items-center"><strong>Fecha:</strong> <input class='form-control ml-3 ml-lg-0' type='date' t-attf-name="#{counter}-date_invitation" data-date-format="YYYY-MM-DD" required="This field is required"/></div>
										</div>
		                                <br class="d-none d-lg-block"/>
										<hr class="d-lg-none"/>
			                            <!-- <div class="row">
		                                    <div class="col-lg-1"><strong>Doc</strong></div>
		                                    <div class="col-lg-2"><strong>C.I/R.I.F</strong></div>
		                                    <div class="col-lg-2"><strong>Name</strong></div>
		                                    <div class="col-lg-2"><strong>Email</strong></div>
		                                    <div class="col-lg-2"><strong>Phone</strong> <span class="text-muted">(Optional)</span></div>
		                                    <div style="padding-left: 0px;" class="col-lg-1"><strong style="font-size:10px;">Frecuente</strong></div>
		                                </div> -->
		                                <t t-foreach="range(1, ticket['quantity'] + 1)" t-as="att_counter" name="attendee_loop">
		                                    <t t-set="counter" t-value="counter + 1"/>
		                                    <div class="row mb4">
		                                        <t t-set="attendee_placeholder">Attendee #%s</t>
		                                        <div class="col-lg-1 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">Doc</strong>
													<select name="prefix_vat" t-attf-class="form-control ml-3 ml-lg-0" required="This field is required" t-attf-name="#{counter}-prefix_vat">
														<option value="v">V</option>
														<option value="e">E</option>
														<option value="j">J</option>
														<option value="g">G</option>
														<option value="c">C</option>
													</select>
		                                        </div>
		                                        <div class="col-lg-2 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">C.I/R.I.F</strong>
													<input class='form-control ml-3 ml-lg-0' type='text' t-attf-name="#{counter}-vat" id="#{counter}-vat" required="This field is required"/>
												</div>
		                                        <div class="col-lg-2 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">Name</strong>
													<input class='form-control ml-3 ml-lg-0' type='text' t-attf-name="#{counter}-name" id="#{counter}-name" required="This field is required" t-att-placeholder="attendee_placeholder %counter"/>
												</div>
		                                        <div class="col-lg-2 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">Email</strong>
													<input class='form-control ml-3 ml-lg-0' type='email' t-attf-name="#{counter}-email" id="#{counter}-email" required="This field is required"/>
												</div>
		                                        <div class="col-lg-2 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">Phone</strong> <span t-attf-class="text-muted#{' d-lg-none' if counter > 1 else ''}">(Optional)</span>
													<input class='form-control ml-3 ml-lg-0' type='text' t-attf-name="#{counter}-phone" id="#{counter}-phone" />
												</div>
		                                        <div class="col-lg pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">Frecuente</strong>
													<input style="width: 15px" class='form-control ml-3 ml-lg-0' type='checkbox' t-attf-name="#{counter}-contact" id="#{counter}-contact"/>
												</div>
                                                <div class="col-lg d-flex align-items-end mb-3 mb-lg-0"><imput type="button" t-attf-name="l#{counter}" class="btn btn-primary clear-item">Limpiar</imput></div>
		                                        <input class='d-none' type='text' t-attf-name="#{counter}-ticket_id" t-attf-value="#{ticket['id']}"/>
		                                    </div>
		                                </t>
			                            <t t-set="counter_type" t-value="counter_type + 1"/>
					                    <br/>
		                            </t>
		                        </div>

			                    <h2>Contactos Frecuentes</h2>
		                            <t t-set="partner" t-value="request.env['res.users'].search([('id','=', uid)], limit=1).partner_id.id"/>
		                            <t t-foreach="request.env['frecuent.partner.relation'].search([('partner_id','=', partner), ('active','=', True)])" t-as="c">
			                            <t t-set="counter_frequent" t-value="counter_frequent + 1"/>
			                            <div class="row mb4" t-attf-name="f#{counter_frequent}-div">
	                                        <div class="col-lg-1 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center">
												<strong class="d-lg-none">Doc</strong>
												<select name="prefix_vat" t-att-value="c.frecuent_partner_id.prefix_vat" t-attf-class="form-control ml-3 ml-lg-0" t-attf-name="f#{counter_frequent}-prefix_vat">
													<option value="v">V</option>
													<option value="e">E</option>
													<option value="j">J</option>
													<option value="g">G</option>
													<option value="c">C</option>
												</select>
	                                        </div>
	                                        <div class="col-lg-2 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
												<strong class="d-lg-none">C.I/R.I.F</strong>
												<input class='form-control ml-3 ml-lg-0' t-att-value="c.frecuent_partner_id.vat" type='text' t-attf-name="f#{counter_frequent}-vat"/>
											</div>
	                                        <div class="col-lg-2 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
												<strong class="d-lg-none">Name</strong>
												<input class='form-control ml-3 ml-lg-0' t-att-value="c.frecuent_partner_id.name" type='text' t-attf-name="f#{counter_frequent}-name"/>
											</div>
	                                        <div class="col-lg-2 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
												<strong class="d-lg-none">Email</strong>
												<input class='form-control ml-3 ml-lg-0' t-att-value="c.frecuent_partner_id.email" type='email' t-attf-name="f#{counter_frequent}-email"/>
											</div>
	                                        <div class="col-lg-2 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
												<strong class="d-lg-none">Phone</strong> <span class="text-muted d-lg-none">(Optional)</span>
												<input class='form-control ml-3 ml-lg-0' t-att-value="c.frecuent_partner_id.phone" type='text' t-attf-name="f#{counter_frequent}-phone"/>
											</div>

	                                        <!--div style="padding: 0px 5px;" class="col-lg-1"><imput type="button" t-attf-name="g#{counter_frequent}" style="background: gray;border-color: gray;width: 68px;font-size: x-small;font-weight: 600;padding: 0px;height: 23px;" class="btn btn-primary save-cf">Guardar</imput></div-->
	                                        <div class="col-lg-3 mb-3 mb-lg-0 d-flex mt-2 mt-lg-0">
												<div class="col-auto col-lg pl-0 px-lg-0 d-flex align-items-end"><imput type="button" t-attf-name="s#{counter_frequent}" class="btn btn-primary selection-cf">Seleccionar</imput></div>
												<div class="col-auto col-lg pl-0 px-lg-3 d-flex align-items-end"><imput type="button" t-attf-name="d#{counter_frequent}" class="btn btn-danger delete-cf">Eliminar</imput></div><!-- <i class="fa fa-trash"/> -->
											</div>

	                                    </div>
		                            </t>
		                    </main>
		                    <footer class="modal-footer">
		                        <div class="float-left">
		                            <button type="submit" class="btn btn-primary">Continue</button>
		                            <button type="button" class="btn btn-secondary js_goto_event" data-dismiss="modal">Cancel Registration</button>
		                        </div>
		                    </footer>
		                </div>
		            </form>
		        </div>
		    </div>
		</template>

	<!-- Country Eventos -->

	<template id="website_event.event_details">
		    <t t-call="website_event.layout">
		        <div itemscope="itemscope" itemtype="http://schema.org/Event" class="container">
		            <h1 itemprop="name" class="text-center mt-3 mb-2" t-field="event.name"></h1>
		            <div class="text-center">
		                <small t-if="event.is_participating" class="badge badge-info">Participating</small>
		            </div>
			        <t t-if="event.event_type != 'invitations'">
			            <h4 class="text-center text-muted">
			                <i class="fa fa-clock-o" role="img" aria-label="Start date" title="Start date"></i> <span itemprop="startDate" t-field="event.with_context(tz=event.date_tz).date_begin" t-options='{"hide_seconds":"True"}'/> to
			                <span itemprop="endDate" t-field="event.with_context(tz=event.date_tz).date_end" t-options='{"hide_seconds":"True"}'/>
			                <t t-if="event.date_tz">(<span t-field="event.date_tz"/>)</t>
			            </h4>
			        </t>
		            <h4 class="text-center text-muted"
		                t-field="event.address_id" t-options='{
		                "widget": "contact",
		                "fields": ["city"]
		                }'/>
		            <div class="row mt32 mb32">
		                <t t-raw="0"/>
		            </div>
		        </div>
		    </t>
		</template>

	<template id="website_sale.cart_lines" name="Shopping Cart Lines">
	        <div t-if="not website_sale_order or not website_sale_order.website_order_line" class="js_cart_lines alert alert-info">
	          Your cart is empty!
	        </div>
	        <table class="mb16 table table-striped table-sm js_cart_lines" id="cart_products" t-if="website_sale_order and website_sale_order.website_order_line">
	            <thead>
	                <tr>
	                    <th class="td-img">Product</th>
	                    <th></th>
	                    <th class="text-center td-qty">Quantity</th>
	                    <th class="text-center td-price">Price</th>
	                    <th class="text-center td-action"></th>
	                </tr>
	            </thead>
	            <tbody>
	                <t t-foreach="website_sale_order.website_order_line" t-as="line">
	                    <tr t-att-class="'optional_product info' if line.linked_line_id else None">
	                        <td colspan="2" t-if="not line.product_id.product_tmpl_id" class='td-img'></td>
	                        <td align="center" t-if="line.product_id.product_tmpl_id" class='td-img'>
	                            <span t-field="line.product_id.image_small" t-options="{'widget': 'image', 'class': 'rounded'}" />
	                        </td>
	                        <td t-if="line.product_id.product_tmpl_id" class='td-product_name'>
	                            <div>
	                                <t t-call="website_sale.cart_line_product_link">
	                                    <strong t-field="line.event_ticket_id.name" />
	                                </t>
	                            </div>
	                            <t t-call="website_sale.cart_line_description_following_lines">
	                                <t t-set="div_class" t-value="'d-none d-md-block'"/>
	                            </t>
	                        </td>
	                        <td class="text-center td-qty">
	                            <div t-if="not line.linked_line_id" class="css_quantity input-group mx-auto oe_website_spinner">
	                                <div class="input-group-prepend">
	                                    <a t-attf-href="#" class="btn btn-link js_add_cart_json d-none d-md-inline-block" aria-label="Remove one" title="Remove one">
	                                        <i class="fa fa-minus"></i>
	                                    </a>
	                                </div>
	                                <input type="text" class="js_quantity form-control quantity" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" />
	                                <div class="input-group-append">
	                                    <a t-attf-href="#" class="btn btn-link float_left js_add_cart_json d-none d-md-inline-block" aria-label="Add one" title="Add one">
	                                        <i class="fa fa-plus"></i>
	                                    </a>
	                                </div>
	                            </div>
	                            <t t-if="line.linked_line_id">
	                              <span class="js_quantity text-muted" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-esc="int(line.product_uom_qty)"/>
	                            </t>
	                        </td>
	                        <td class="text-center td-price" name="price">
	                            <t t-set="combination" t-value="line.product_id.product_template_attribute_value_ids + line.product_no_variant_attribute_value_ids"/>
	                            <t t-set="combination_info" t-value="line.product_id.product_tmpl_id._get_combination_info(combination)"/>

	                            <t t-set="list_price_converted" t-value="website.currency_id._convert(combination_info['list_price'], website_sale_order.currency_id, website_sale_order.company_id, date)"/>
	                            <t groups="account.group_show_line_subtotals_tax_excluded" t-if="(website_sale_order.pricelist_id.discount_policy == 'without_discount' and website_sale_order.currency_id.compare_amounts(list_price_converted, line.price_reduce_taxexcl) == 1) or website_sale_order.currency_id.compare_amounts(line.price_unit, line.price_reduce) == 1" name="order_line_discount">
	                                <del t-attf-class="#{'text-danger mr8'}" style="white-space: nowrap;" t-esc="list_price_converted" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" />
	                            </t>
	                            <span t-field="line.price_reduce_taxexcl" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" groups="account.group_show_line_subtotals_tax_excluded" />
	                            <t groups="account.group_show_line_subtotals_tax_included" t-if="(website_sale_order.pricelist_id.discount_policy == 'without_discount' and website_sale_order.currency_id.compare_amounts(list_price_converted, line.price_reduce_taxinc) == 1) or website_sale_order.currency_id.compare_amounts(line.price_unit, line.price_reduce) == 1" name="order_line_discount">
	                                <del t-attf-class="#{'text-danger mr8'}" style="white-space: nowrap;" t-esc="list_price_converted" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" />
	                            </t>
	                            <span t-field="line.price_reduce_taxinc" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" groups="account.group_show_line_subtotals_tax_included" />
	                        </td>
	                        <td class="td-action">
	                            <a href='#' aria-label="Remove from cart" title="Remove from cart" class='js_delete_product no-decoration'> <small><i class='fa fa-trash-o'></i></small></a>
	                        </td>
	                    </tr>
	                </t>
	            </tbody>
	        </table>

	    </template>

	<template id="website_sale.cart_summary" name="Cart right column">
	        <div class="card">
	            <div class="card-body p-xl-0">
	                <div class="toggle_summary d-xl-none">
	                    <b>Your order: </b> <span t-field="website_sale_order.amount_total" t-options='{"widget": "monetary", "display_currency": website_sale_order.pricelist_id.currency_id}'/>
	                    <span class='fa fa-chevron-down fa-border float-right' role="img" aria-label="Details" title="Details"></span>
	                </div>
	                <div t-if="not website_sale_order or not website_sale_order.website_order_line" class="alert alert-info">
	                    Your cart is empty!
	                </div>
	                <div class="toggle_summary_div d-none d-xl-block">
	                    <table class="table table-striped table-sm" id="cart_products" t-if="website_sale_order and website_sale_order.website_order_line">
	                        <thead>
	                            <tr>
	                                <th class="border-top-0 td-img">Product</th>
	                                <th class="border-top-0"></th>
	                                <th class="border-top-0 td-qty">Quantity</th>
	                                <th class="border-top-0 text-center td-price">Price</th>
	                            </tr>
	                        </thead>
	                        <tbody>
	                            <tr t-foreach="website_sale_order.website_order_line" t-as="line">
	                                <td class='' colspan="2" t-if="not line.product_id.product_tmpl_id"></td>
	                                <td class='td-img' t-if="line.product_id.product_tmpl_id">
	                                    <span t-field="line.product_id.image_small" t-options="{'widget': 'image', 'class': 'rounded'}" />
	                                </td>
	                                <td class='td-product_name' t-if="line.product_id.product_tmpl_id">
	                                    <div>
	                                        <strong t-field="line.event_ticket_id.name" />
	                                    </div>
	                                </td>
	                                <td class='td-qty'>
	                                    <div t-esc="line.product_uom_qty" />
	                                </td>
	                                <td class="text-center td-price">
	                                    <span t-field="line.price_reduce_taxexcl" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" groups="account.group_show_line_subtotals_tax_excluded" />
	                                    <span t-field="line.price_reduce_taxinc" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" groups="account.group_show_line_subtotals_tax_included" />
	                                </td>
	                            </tr>
	                        </tbody>
	                    </table>
	                    <t t-call="website_sale.total">
	                        <t t-set='redirect'>/shop/payment</t>
	                    </t>
	                </div>
	            </div>
	        </div>
	    </template>

	<template id="website_event_sale.cart_summary_inherit_website_event_sale" inherit_id="website_sale.cart_summary" name="Event Cart right column">
			<xpath expr="//td[hasclass('td-product_name')]/div/strong" position="after">
			</xpath>
		</template>

	<template id="country_event_report" inherit_id="Binaural_Eventos.event_report">
            <xpath expr="//table[@name='table_event_list']" position="replace">
	            <table name="table_event_list" style="width:925px">
                    <tr>
                        <th>Nro. Acción</th>
                        <th>Nombre del Socio</th>
                        <th>Nro. Documento</th>
                        <th>Nombre del invitado</th>
                    </tr>
                    <t t-foreach="o.registration_ids" t-as="reg">
						<tr>
                            <td><span t-field="reg.partner_id.action_number"/></td>
                            <td><span t-field="reg.partner_id.name"/></td>
                            <td><span t-field="reg.name"/></td>
                            <td><span t-field="reg.prefix_vat"/>-<span t-field="reg.vat"/></td>
                        </tr>
                    </t>
                </table>
            </xpath>
        </template>

	<template id="website_event_sale.registration_template" inherit_id="website_event.registration_template">
		    <xpath expr="//t[@t-id='tickets']" position="replace">
		        <t t-set="saleable_tickets" t-value="event.event_ticket_ids.filtered(lambda t: not t.is_expired)"/>
		        <t t-id="tickets" t-foreach="saleable_tickets" t-as="ticket">
		            <t t-call="website_event.ticket">
						<t t-if="event.event_type != 'invitations'">
			                <t t-set="name">
			                    <span itemprop="name" t-field="ticket.name"/>
			                </t>
			                <t t-set="description">
			                    <span itemprop="description" t-field="ticket.product_id.description_sale"/>
			                </t>
			                <t t-set="registration_end">
			                    <t t-if="ticket.deadline">
			                        <span itemprop="priceValidUntil" t-field="ticket.deadline"/>
			                    </t>
			                    <t t-if="not ticket.deadline">
			                        <span>Unlimited</span>
			                    </t>
			                </t>
			                <t t-set="price">
			                    <t t-if="ticket.price or editable">
			                        <t t-if="(ticket.price-website.get_current_pricelist().currency_id._convert(ticket.price_reduce, event.company_id.sudo().currency_id, event.company_id, datetime.date.today())) &gt; 1
			                                 and website.get_current_pricelist().discount_policy == 'without_discount'">
			                            <del class="text-danger mr4" t-field="ticket.price" t-options='{
			                                "widget": "monetary",
			                                "from_currency": event.company_id.sudo().currency_id,
			                                "display_currency": website.get_current_pricelist().currency_id
			                            }'/>
			                        </t>
			                        <span t-field="ticket.price" t-options='{
			                            "widget": "monetary",
			                            "display_currency": website.pricelist_id.currency_id
			                        }' groups="account.group_show_line_subtotals_tax_excluded"/>
			                        <span t-field="ticket.price_reduce_taxinc" t-options='{
			                            "widget": "monetary",
			                            "display_currency": website.pricelist_id.currency_id
			                        }' groups="account.group_show_line_subtotals_tax_included"/>
			                        <span itemprop="price" style="display:none;" t-esc="ticket.price"/>
			                        <span itemprop="priceCurrency" style="display:none;" t-esc="website.pricelist_id.currency_id.name"/>
			                    </t>
			                    <t t-if="not ticket.price and not editable">
			                        <span>Free</span>
			                    </t>
			                    <span t-if="ticket.seats_max and ((ticket.seats_reserved or 0)*100 / ticket.seats_max)&gt;75" class="badge badge-pill" itemprop="availability" content="http://schema.org/LimitedAvailability">
			                        <t t-esc="ticket.seats_max - ticket.seats_reserved"/>
			                        <span>left</span>
			                    </span>
			                </t>
			                <t t-set="quantity">
			                    <select t-attf-name="nb_register-#{ticket.id}" class="form-control">
			                        <t t-set="seats_max_ticket" t-value="(ticket.seats_availability == 'unlimited' or ticket.seats_available &gt; 9) and 10 or ticket.seats_available + 1"/>
			                        <t t-set="seats_max_event" t-value="(event.seats_availability == 'unlimited' or event.seats_available &gt; 9) and 10 or event.seats_available + 1"/>
			                        <t t-set="seats_max" t-value="min(seats_max_ticket, seats_max_event)"/>
			                        <t t-foreach="range(0, seats_max)" t-as="nb">
			                            <option t-esc="nb" t-att-selected="len(saleable_tickets) == 1 and nb == 1 and 'selected'"/>
			                        </t>
			                    </select>
			                </t>
						</t>
			            <t t-else="">
				            <t t-set="name">
			                    <span itemprop="name" t-field="ticket.name"/>
			                </t>
				            <t t-set="description">
			                    <span itemprop="description" t-field="ticket.product_id.description_sale"/>
			                </t>
			                <t t-set="registration_end">
		                        <span/>
			                </t>
			                <t t-set="price">
			                    <t t-if="ticket.price or editable">
			                        <t t-if="(ticket.price-website.get_current_pricelist().currency_id._convert(ticket.price_reduce, event.company_id.sudo().currency_id, event.company_id, datetime.date.today())) &gt; 1
			                                 and website.get_current_pricelist().discount_policy == 'without_discount'">
			                            <del class="text-danger mr4" t-field="ticket.price" t-options='{
			                                "widget": "monetary",
			                                "from_currency": event.company_id.sudo().currency_id,
			                                "display_currency": website.get_current_pricelist().currency_id
			                            }'/>
			                        </t>
			                        <span t-field="ticket.price" t-options='{
			                            "widget": "monetary",
			                            "display_currency": website.pricelist_id.currency_id
			                        }' groups="account.group_show_line_subtotals_tax_excluded"/>
			                        <span t-field="ticket.price_reduce_taxinc" t-options='{
			                            "widget": "monetary",
			                            "display_currency": website.pricelist_id.currency_id
			                        }' groups="account.group_show_line_subtotals_tax_included"/>
			                        <span itemprop="price" style="display:none;" t-esc="ticket.price"/>
			                        <span itemprop="priceCurrency" style="display:none;" t-esc="website.pricelist_id.currency_id.name"/>
			                    </t>
			                    <t t-if="not ticket.price and not editable">
			                        <span>Free</span>
			                    </t>
			                    <span t-if="ticket.seats_max and ((ticket.seats_reserved or 0)*100 / ticket.seats_max)&gt;75" class="badge badge-pill" itemprop="availability" content="http://schema.org/LimitedAvailability">
			                        <t t-esc="ticket.seats_max - ticket.seats_reserved"/>
			                        <span>left</span>
			                    </span>
			                </t>
			                <t t-set="quantity">
			                    <select t-attf-name="nb_register-#{ticket.id}" class="form-control">
			                        <t t-set="seats_max_ticket" t-value="(ticket.seats_availability == 'unlimited' or ticket.seats_available &gt; 9) and 10 or ticket.seats_available + 1"/>
			                        <t t-set="seats_max_event" t-value="(event.seats_availability == 'unlimited' or event.seats_available &gt; 9) and 10 or event.seats_available + 1"/>
			                        <t t-set="seats_max" t-value="min(seats_max_ticket, seats_max_event)"/>
			                        <t t-foreach="range(0, seats_max)" t-as="nb">
			                            <option t-esc="nb" t-att-selected="len(saleable_tickets) == 1 and nb == 1 and 'selected'"/>
			                        </t>
			                    </select>
			                </t>
			            </t>
		            </t>
		        </t>
		    </xpath>
		    <xpath expr="//form[@id='registration_form']" position="attributes">
		        <attribute name="t-if">event.event_ticket_ids and not all([ticket.is_expired for ticket in event.event_ticket_ids])</attribute>
		    </xpath>
		</template>

	<template id="Country_Eventos.registration_attendee_details_frequent" name="Invitados Frecuentes">
		    <div role="dialog" id="modal_attendees_registration_frequent" class="modal fade" tabindex="-1">
		        <div class="modal-dialog modal-lg">
		            <form id="attendee_registration_frequent" method="post" class="js_website_submit_form">
		                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
		                <div class="modal-content">
		                    <header class="modal-header">
		                        <h4 class="modal-title" id="myModalLabel"><strong>Invitados Frecuentas</strong></h4>
		                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">x</button>
		                    </header>
		                    <main class="modal-body">
		                        <div class="container">
		                            <t t-set="counter_type" t-value="1"/>
		                            <t t-set="counter" t-value="0"/>
		                            <t t-foreach="tickets" t-as="ticket">
		                                <br/>
			                            <!-- <div class="row">
		                                    <div class="col-lg-1"><strong>Doc</strong></div>
		                                    <div class="col-lg-2"><strong>C.I/R.I.F</strong></div>
		                                    <div class="col-lg-3"><strong>Name</strong></div>
		                                    <div class="col-lg-3"><strong>Email</strong></div>
		                                    <div class="col-lg-2"><strong>Phone</strong> <span class="text-muted">(Optional)</span></div>
		                                    <div style="padding-left: 0px;" class="col-lg-1"><strong style="font-size:12px;">Frecuente</strong></div>
		                                </div> -->
		                                <t t-foreach="range(1, ticket['quantity'] + 1)" t-as="att_counter" name="attendee_loop">
		                                    <t t-set="counter" t-value="counter + 1"/>
		                                    <div class="row mb4">
		                                        <t t-set="attendee_placeholder">Attendee #%s</t>
		                                        <div class="col-lg-1 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">Doc</strong>
													<select name="prefix_vat" t-attf-class="form-control ml-3 ml-lg-0" required="This field is required" t-attf-name="#{counter}-prefix_vat">
														<option value="v">V</option>
														<option value="e">E</option>
														<option value="j">J</option>
														<option value="g">G</option>
														<option value="c">C</option>
													</select>
		                                        </div>
		                                        <div class="col-lg-2 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">C.I/R.I.F</strong>
													<input class='form-control ml-3 ml-lg-0' type='text' t-attf-name="#{counter}-vat" required="This field is required"/>
												</div>
		                                        <div class="col-lg-3 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">Name</strong>
													<input class='form-control ml-3 ml-lg-0' type='text' t-attf-name="#{counter}-name" required="This field is required" t-att-placeholder="attendee_placeholder %counter"/>
												</div>
		                                        <div class="col-lg-3 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">Email</strong>
													<input class='form-control ml-3 ml-lg-0' type='email' t-attf-name="#{counter}-email" required="This field is required"/>
												</div>
		                                        <div class="col-lg-2 pr-lg-0 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">Phone</strong> <span t-attf-class="text-muted#{' d-lg-none' if counter > 1 else ''}">(Optional)</span>
													<input class='form-control ml-3 ml-lg-0' type='text' t-attf-name="#{counter}-phone"/>
												</div>
		                                        <div class="col-lg-1 d-inline-flex d-lg-inline-block align-items-center mt-2 mt-lg-0">
													<strong t-attf-class="#{'d-lg-none' if counter > 1 else ''}">Frecuente</strong>
													<input style="width: 15px" class='form-control ml-3 ml-lg-0' type='checkbox' t-attf-name="#{counter}-contact"/>
												</div>
		                                        <input class='d-none' type='text' t-attf-name="#{counter}-ticket_id" t-attf-value="#{ticket['id']}"/>
		                                    </div>
		                                </t>
		                                <t t-set="counter_type" t-value="counter_type + 1"/>
					                    <br/>
		                            </t>
		                        </div>
		                    </main>
		                    <footer class="modal-footer">
		                        <div class="float-left">
		                            <button type="button" class="btn btn-primary">Seleccionar</button>
			                        <button type="button" class="btn btn-primary">Crear</button>
		                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
		                        </div>
		                    </footer>
		                </div>
		            </form>
		        </div>
		    </div>
		</template>

	<template id="event_sale.event_registration_report_template_badge" inherit_id="event.event_registration_report_template_badge">
	        <xpath expr="//div[@id='o_event_name']" position="inside">
	            <div t-if="o.event_ticket_id" class="col-12 text-center" style="padding:0px;">
	                <div style="background: lightgrey; height: 65px;" class="mt16 text-center">
	                    <h3><span t-field="o.event_ticket_id"/></h3>
	                </div>
	            </div>
				<t t-if="o.qr">
                    <img t-if="o.qr" t-att-src="'data:image/png;base64,%s' % to_text(o.qr)" style="width:300px;height:300px; margin-left: auto; margin-right: auto;"/>
				</t>
	        </xpath>
	    </template>

</odoo>